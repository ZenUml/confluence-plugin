<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-114996686-1"></script>
  <script type="text/javascript" src="js/google-analytics.js"></script>
  <meta charset="UTF-8">
  <title>ZenUML Graph Macro Migrator</title>
  <script type="text/javascript" src="https://connect-cdn.atl-paas.net/all.js"></script>
  <script type="text/javascript" src="./js/util.js"></script>
  <script type="text/javascript">
    async function execute() {
      try {
        const pageId = getUrlParam('pageId');
        const pageContent = await AP.request({url: `/rest/api/content/${pageId}/?expand=body.storage`, type: 'GET'});
        let parsedPage = JSON.parse(pageContent.body);
        const storageFormatContent = parsedPage.body.storage.value;
        if(storageFormatContent.indexOf('ac:name="zenuml-graph-macro"')) {
          gtag('event', 'detect', {'event_category' : 'Macro',  'event_label' : pageId});
        }
      } catch (e) {
        gtag('event', 'detect', {'event_category' : 'Macro',  'event_label' : 'error'});
        console.error("Failed to detect graph macro. Please contact us at https://www.zenuml.com.", e);
      }
    }
    execute();
  </script>

</head>
<body>

</body>
</html>